{% extends 'base.html' %}

{% block title %}Luo uusi kysely{% endblock %}

{% block head %}
  <script src="{{ url_for('static', filename='js/create_survey.js') }}"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/create_survey.css') }}">
{% endblock %}

{% block content %}
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script>
    $( function() {
            $("#choiceTable").sortable({
              items: "tr:not(#newRow)"
            });
    })
  </script>
</br>
<h2><img src="{{ url_for('static', filename='images/note_add_white_36dp.svg') }}" alt="" class="d-inline-block align-text-top">  Luo uusi kysely</h2>

    <label for="groupname">Kyselyn nimi</label>
    <br/>
    <input type="text" class="form-control" id="groupname" name="groupname" />
    <br/>
    <h2>Priorisoitavat ryhmät</h2>

    <table class="table table-striped">
      <thead class="table-dark">
        <tr>
          <th>Nimi</th>
          <th>Enimmäispaikat</th>
          <th>Lisätietokenttä 1</th>
          <th>Lisätietokenttä 2</th>
          <th>Muokkaa/Vahvista</th>
        </tr>
      </thead>
      <tbody id="choiceTable">
        <tr id="newRow" class="editable">
          <td>
              <input type="text" id="choiceName" class="new-row-input" />
          </td>
          <td>
              <input type="number" id="choiceMaxSpaces" class="new-row-input"/>
          </td>
          <td>
              <textarea id="choiceInfo1" class="new-row-input"></textarea>
          </td>
          <td>
              <textarea id="choiceInfo2" class="new-row-input"></textarea>
          </td>
          <td>
              <button onclick="addChoice()" class="new-row-input" name="addchoice">Lisää rivi</button>
          </td>
        </tr>
      </tbody>
    </table>
    <br/><br/><br/>
    <button type="submit" class="btn btn-primary" value="Luo kysely" onclick="createNewSurvey()" name="createsurvey">Luo kysely</button>

    <div id="deleteContainer" style="display: none;">
      <input type="button" id="deleteSubmission" value="Poista valinnat">
      <script>
          $("#deleteSubmission").click(function() {
              $("#confirmContainer").show();
          });
      </script>
    </div>

    <div id="confirmContainer" style="display: none;">
        <p>Oletko varma?</p>
        <input type="button" id="noDeletion" value="Peruuta">
        <script>
            $("#noDeletion").click(function() {
                $("#submitExists").show();
                $("#deleteContainer").show();
                $("#confirmContainer").hide();
            });
        </script>
        <input type="button" id="confirmDelete" value ="Poista" onclick="createNewSurvey()">
    </div>

{% endblock %}